<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="script.js"></script>
    <title>PoiseSimulator</title>
    
</head>
<body>
    <!-- <header>
        <h1>Bem-vindo</h1>
    </header> -->

    <main>
        <section>
            <h2>Simulador do Poise</h2>
            <p>Criador de combates simulados</p>
        </section>
    </main>


    <script>

        class Personagem {
            constructor(nome, ciclo, might, mind, dadoArma, size) {
                
                this.nome = nome;
                this.might = might;
                this.mind = mind;
                this.ciclo = ciclo;
                this.mettle = 6 - (might+mind);
                this.dadoArma = dadoArma; //4, 6, 8, 10, 12
                this.size = size; // 3 é medio
                this.costPA = (dadoArma<7 ? 1 : 2);
                this.totalPA = 3 + this.mettle;
                this.reach = this.mettle + might;
                this.desloc = size; //(menos capacidade de carga)
                this.hitPoints = 10+this.mettle+ciclo;
                this.mover = function(){
                    console.log(this.nome+ " moveu");
                }
                this.atacar= function(){
                    console.log("ata");
                }
                this.recar= function(){
                    console.log("rec");
                }
                //substituir combatStyle por arma/escudo e armadura
            }
        }

        function combate(Personagem1, Personagem2, distInicial){
            //alert(Personagem1.hitPoints);
            // alert(Personagem2.hitPoints);
            let initiP1 =0
            let initiP2 = 0;

            //rolar iniciativa
            while(initiP1==initiP2){
                initiP1 = rolarDados(6)+Personagem1.mettle;
                
                console.log (initiP1);

                initiP2 = rolarDados(6)+Personagem2.mettle;
 
                console.log (initiP2);
                
                if (initiP1==initiP2){
                    console.log ("rerolar");
                }
            }

            let primeiro,segundo = new Personagem;

            if(initiP1>initiP2){
            primeiro = Personagem1;
            segundo = Personagem2;    

            }
            if(initiP1<initiP2){
            primeiro = Personagem2;
            segundo = Personagem1;
            }
            
            console.log("O " + primeiro.nome + " começa !");

            let distAtual = distInicial;
            //decisão do primeiro jogador
            
            for (let rounds=0;rounds<=10;rounds++){ //trocar por while vida dos char
            
            if(distAtual>0);
                primeiro.mover();

            if(distAtual>0);
                primeiro.mover();


            }


        }

        
        
        const Army = [];

        // //cria 10 Joes iguais
        // for (let i = 0; i < 10; i++){
        //     Army.push(new Personagem(`Joe${i}`, 3, 0));
        // }

        //cria todas a permutações de atributo
        let a = 0;
        for (let i = 0; i <= 3; i++){
            for(let j = (3-i); j <= 3; j++){
                Army.push(new Personagem(`Joe${a}`, 1, i, j, 8, 3));
                a++;
            }
        }
      

        for (let i = 0; i < 10; i++){
            document.body.innerHTML += `
                <div style="
                    border: 1px solid #ccc;
                    border-radius: 8px;
                    padding: 15px;
                    margin: 10px;
                    width: 300px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    background-color: #fff;
                ">
                    <h3 style="margin: 0 0 10px 0">${Army[i].nome}</h3>
                    <p style="margin: 5px 0">Might: ${Army[i].might}</p>
                    <p style="margin: 5px 0">Mind: ${Army[i].mind}</p>
                    <p style="margin: 5px 0">Mettle: ${Army[i].mettle}</p>
                    <p style="margin: 5px 0">Combat Style: 1d${Army[i].dadoArma}</p>
                    <p style="margin: 5px 0">Custo em PA: ${Army[i].costPA}</p>
                    <p style="margin: 5px 0">Total de PA: ${Army[i].totalPA}</p>
                    <p style="margin: 5px 0">Alcance: ${Army[i].reach}</p>
                    <p style="margin: 5px 0">Deslocamento: ${Army[i].desloc}</p>
                    <p style="margin: 5px 0">Pontos de Vida: ${Army[i].hitPoints}</p>

                    <button onclick="combate(Army[0],Army[1], 30)" style="
                        padding: 8px 15px;
                        background-color: #4CAF50;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                        margin-top: 10px;
                    ">
                        Rolar Combate
                    </button>
                </div>
            `;

         
            //console.log(Army[i]);
        }


    </script>

</body>
</html>
